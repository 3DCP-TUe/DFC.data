attr:
  class: material delivery systems
  subclass: dosing systems
  name: liquid dosing vertico-1
  description: Custom build liquid dosing combination with dosing pump, ultrasonic flow sensor and pressure sensor. 
  note: Frame and pump acquired via Vertico. Electronics and controls developed in house with support of Siemens Digital Industries. 

couplings:
  inlets:
    - name: main inlet
      type: push-in fitting
      size: 10
    - name: inlet for cleaning
      type: GEKA
  outlets:
    - name: main outlet
      type: push-in fitting
      size: 6
    - name: by-pass before flow sensor that can be manually opened and closed
      type: push-in fitting
      size: 6

sensor:
  - name: pressure sensor
    type: pressure
    manufacturer: WIKA
    model: A-10            
    product_number: 46879223
    pressure_range: [0, 16] 
  - name: clamp-on flow sensor
    type: ultrasonic flow sensor
    manufacturer: KEYENCE International
    sensor_model: FD-XS8
    controller_model: FD-XA1
    clamp_set: 
      model: FD-XC8R1
      pipe_material: plastic
      pipe_size: 6
    settings:
      basic:
        output1_mode: standard
        output1_logic: N.O.
        output2_mode: standard
        output2_logic: N.O.
        analog_output_current: [4, 20] # mA
        analog_output_scaling: [0, 100] # ml/min
        input1_function: off
        input2_function: off
        response_time: 1 # s
        integrated_flow)unit: 1 # ml
      advanced:
        flow_resolution: 1 # ml/min
        shot_resolution: 0.01 # ml
        disp_average: 1 # seconds
        hys_value: 20 # ml/min
        zero_cut_flow: 5 # ml/min
        pipe_size: 6
        flow_tuning:
          adjust_span: 0.92

parts:
  - name: pump motor
    type: asynchronous motor
    manufacturer: NORD
    model: SK0XF-71LP/4
    max_velocity: 1405 # RPM
  - name: pump head
    type: progressing cavity pump
    manufacturer: Seepex
    model: MD 0005-24  
  - name: plc
    type: plc
    manufacturer: Siemens
    model: SIMATIC DP, CPU 1510SP F-1 PN for ET 200SP
    product_number: 6ES7510-1SK03-0AB0
  - name: bus adapter
    type: bus adapter RJ45
    model: SIMATIC ET 200SP, BusAdapter BA 2xRJ45, 2 RJ45 sockets
    manufacturer: Siemens
    product_number: 6ES7193-6AR00-0AA0
  - name: power suppply
    type: 24V DC power supply 24V DC
    manufacturer: Siemens
    model: SIMATIC ET 200SP PS 24V/10A Stabilized power supply
    product_number: 6EP7133-6AE00-0BN0
  - name: analog input modules
    type: analog input modules U/I
    manufacturer: Siemens
    model: SIMATIC ET 200SP, Analog input module, AI 4x U/I 2-wire Standard
    product_number: 6ES7134-6HD01-0BA1
    amount: 1
  - name: analog output modules
    type: analog output modules U/I
    manufacturer: Siemens
    model: SIMATIC ET 200SP, Analog output module, 4XU/I Standard
    product_number: 6ES7135-6HD00-0BA1
    amount: 1
  - name: digital input modules
    type: digital input modules 24V DC
    manufacturer: Siemens
    model: SIMATIC ET 200SP, Digital input module, DI 8x 24V DC Standard
    product_number: 6ES7131-6BF01-0BA0
    amount: 1
  - name: digital output modules 
    type: digital output modules 24V DC
    manufacturer: Siemens
    model: SIMATIC ET 200SP, digital output module, DQ 4x 24VDC/2A Standard
    product_number: 6ES7132-6BD20-0BA0
    amount: 1
  - name: frequency converter
    type: frequency converter
    manufacturer: Siemens
    model: SINAMICS G120C 0.55 kW
    product_number: 6SL3210-1KE11-8AF2
  
io:
  - name: AI3
    type: analog input 4-20 mA active
    function: free-to-use
    connector: Weipu SP2112/S4
    header: material_io_ai3_ma
  - name: AO0
    type: analog output 4-20 mA passive
    function: free-to-use
    connector: Weipu SP2112/P5
    header: material_io_ao0_ma
  - name: DO3
    type: digital output 24V DC
    function: free-to-use
    connector: Weipu SP2112/S3
    header: material_io_do3_bool

processed_system_data:
  - name: source time
    function: opc ua server time
    unit: hh:mm:ss
    header: vertico_source_time
  - name: is remote
    function: indicates if the system is remote controlled
    unit: bool
    header: vertico_is_remote_bool
  - name: is open loop
    function: indicates if the system is running in open loop
    unit: bool
    header: vertico_is_open_loop_bool
  - name: motor velocity
    function: motor velocity
    unit: RPM
    header: vertico_actual_motor_velocity_rpm
  - name: actual volume flow rate
    function: actual volume flow rate
    unit: ml/min
    header: vertico_actual_flow_ml_min
  - name: raw signal volume flow rate 
    function: signal value of the actual volume flow rate
    unit: mA
    header: vertico_actual_flow_ma
  - name: actual pressure
    function: actual pressure
    unit: bar
    header: vertico_actual_pressure_bar
  - name: local setpoint open loop
    function: local setpoint open loop from adjustment dial
    unit: RPM
    header: vertico_local_setpoint_open_loop_rpm
  - name: local setpoint close loop
    function: local setpoint closed loop from adjustment dial
    unit: ml/min
    header: vertico_local_setpoint_closed_loop_mlmin
  - name: remote control start/stop via OPC-UA
    function: remote control start/stop
    unit: bool
    header: vertico_remote_start_stop_bool
  - name: remote setpoint open loop
    function: remote setpoint open loop via OPC-UA
    unit: RPM
    header: vertico_remote_setpoint_open_loop_rpm
  - name: remote setpoint closed loop
    function: remote setpoint closed loop via OPC-UA
    unit: ml/min
    header: vertico_remote_setpoint_closed_loop_mlmin
  - name: closed loop PID parameter P
    function: closed loop PID parameter P
    unit: real number
    header: vertico_pid_p
  - name: closed loop PID parameter I
    function: closed loop PID parameter I
    unit: real number
    header: vertico_pid_i
  - name: closed loop PID parameter D
    function: closed loop PID parameter D
    unit: real number
    header: vertico_pid_d